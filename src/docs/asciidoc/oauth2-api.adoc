[[oauth2-api]]
== ğŸ”‘ OAuth2 ì†Œì…œ ë¡œê·¸ì¸ API
ì†Œì…œ ë¡œê·¸ì¸(ì¹´ì¹´ì˜¤, êµ¬ê¸€, ì• í”Œ)ì„ ì§€ì›í•©ë‹ˆë‹¤.

OAuth2 ë¡œê·¸ì¸ì€ ë‹¤ìŒê³¼ ê°™ì€ íë¦„ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

. ì¸ê°€ ìš”ì²­ â†’ ì¸ì¦ì„œë²„ ë¦¬ë‹¤ì´ë ‰íŠ¸
. ë¡œê·¸ì¸ ì™„ë£Œ í›„ ì½œë°± ìˆ˜ì‹  â†’ ê¸°ì¡´ ìœ ì € ì—¬ë¶€ íŒë³„
- (3-a) ê¸°ì¡´ ìœ ì €: refresh_token(30ì¼), device_code(30ì¼)ì´ ì¿ í‚¤ì— ì„¤ì •ë¨ -> /refreshí˜¸ì¶œí•´ì„œ accesss-token íšë“
- (3-b) ì‹ ê·œ ìœ ì €: `preSignupId(15ë¶„)` ì¿ í‚¤ ì„¤ì • â†’ ë³„ë„ íšŒì›ê°€ì… API í˜¸ì¶œí•˜ì—¬ (3-a)íë¦„ ë”°ë¼ê°

---

=== ì†Œì…œ ë¡œê·¸ì¸ ì¸ê°€ ìš”ì²­

ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ URIë¡œ ë¦¬ë””ë ‰ì…˜í•©ë‹ˆë‹¤. +
providerëŠ” `kakao`, `google`, `apple` ì¤‘ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.

[discrete]
==== ìš”ì²­
include::{snippets}/auth/oauth2-authorize/http-request.adoc[]
include::{snippets}/auth/oauth2-authorize/query-parameters.adoc[]

[discrete]
==== ì‘ë‹µ
í•´ë‹¹ providerì˜ ì¸ì¦ ì„œë²„ URI(ë¡œê·¸ì¸í™”ë©´)ë¡œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸(302)ë©ë‹ˆë‹¤.
include::{snippets}/auth/oauth2-authorize/http-response.adoc[]


---

=== ì†Œì…œ ë¡œê·¸ì¸ ì½œë°± (ê¸°ì¡´/ì‹ ê·œ ìœ ì € ë¶„ê¸°)

ë¡œê·¸ì¸ ì¸ì¦ì„ ë§ˆì¹˜ë©´ ì¸ì¦ì„œë²„ê°€ ìë™ìœ¼ë¡œ ë°±ì—”ë“œ ì½œë°±ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•©ë‹ˆë‹¤. +
ë”°ë¼ì„œ ì‘ë‹µë§Œ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

[discrete]
==== ìš”ì²­
include::{snippets}/auth/oauth2-callback/http-request.adoc[]
include::{snippets}/auth/oauth2-callback/query-parameters.adoc[]
include::{snippets}/auth/oauth2-callback/path-parameters.adoc[]

[discrete]
==== ì‘ë‹µ ë°©ì‹

ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜•íƒœë¡œ ì‘ë‹µë˜ë©°, ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì˜ ì¿ í‚¤ì™€ í•¨ê»˜ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.
include::{snippets}/auth/oauth2-callback/http-response.adoc[]

.ê¸°ì¡´ìœ ì € ì‘ë‹µ
- 302 ë¦¬ë‹¤ì´ë ‰íŠ¸ to `https://{front-uri}/auth?status=EXISTING_USER`
- ì¿ í‚¤: `refresh_token(30ì¼)`, `device_code(30ì¼)` í¬í•¨

.ì‹ ê·œìœ ì € ì‘ë‹µ
- 302 ë¦¬ë‹¤ì´ë ‰íŠ¸ to `https://{front-uri}//auth?status=SIGNUP_REQUIRED`
- ì¿ í‚¤: `pre_signup_id(15ë¶„)` í¬í•¨

---

=== íšŒì›ê°€ì… ìš”ì²­

ì‹ ê·œìœ ì €ì¸ ê²½ìš° `preSignupId`ê°€ ì¿ í‚¤ë¡œ ì „ë‹¬ë˜ë©°, ì´ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ íšŒì›ê°€ì… ìš”ì²­ì„ í•©ë‹ˆë‹¤.

[discrete]
==== ìš”ì²­
include::{snippets}/auth/oauth2-signup/http-request.adoc[]
include::{snippets}/auth/oauth2-signup/request-fields.adoc[]

[discrete]
==== ì‘ë‹µ

ì¿ í‚¤ì— `refresh_token(30ì¼)`, `device_code(30ì¼)`ê°€ ì„¤ì •ë˜ë©°, ë³„ë„ ì‘ë‹µ ë³¸ë¬¸ì€ ì—†ìŠµë‹ˆë‹¤.

include::{snippets}/auth/oauth2-signup/http-response.adoc[]
include::{snippets}/auth/oauth2-signup/response-fields-headers.adoc[]

---

=== ì•¡ì„¸ìŠ¤ í† í° ì¬ë°œê¸‰

ì¿ í‚¤ì— ì €ì¥ëœ `refresh_token`ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ `accessToken`ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤. +
ë§Œì•½ refresh_tokenì˜ ê¸°í•œì´ 3ì¼ ë¯¸ë§Œì´ë¼ë©´ ìë™ ê°±ì‹ ë©ë‹ˆë‹¤.

[discrete]
==== ìš”ì²­
include::{snippets}/auth/refresh/http-request.adoc[]

[discrete]
==== ì‘ë‹µ

include::{snippets}/auth/refresh/http-response.adoc[]
include::{snippets}/auth/refresh/response-fields-data.adoc[]
