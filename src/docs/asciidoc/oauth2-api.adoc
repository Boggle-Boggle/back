[[oauth2-api]]
== 🔑 OAuth2 소셜 로그인 API
소셜 로그인(카카오, 구글, 애플)을 지원합니다. +
각 제공자별로 인증 URL이 다릅니다.

=== 로그인/회원가입
이 API 하나에서 기존회원/신규회원 여부를 판별하여 서로 다른 결과를 응답합니다.

[discrete]
[cols="1,9", options="header"]
|====
|provider         |uri
|KAKAO    | https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${kakao_client}&redirect_uri={kako_redirect}
|APPLE   | 준비중
|GOOGLE    | 준비중
|====

[discrete]
==== 환경변수
[cols="1,2,7", options="header"]
|====
|env     | name | value
| staging  |${kakao_client}     | 797b99b872c1f2e304c816c32c2faa7c
| staging  |${kako_redirect}     | ${server}/auth/oauth2/callback/kakao
| prod  |${kakao_client}     | 797b99b872c1f2e304c816c32c2faa7c
| prod  |${kako_redirect}     | ${server}/auth/oauth2/callback/kakao
|====


[discrete]

==== 응답 예시

.기존유저 응답(홈화면으로 이동)
[source,json]
----
{
  "status": "EXISTING_USER",
  "accessToken": "..."
}
----

.새로운유저 응답(회원가입으로 이동)
[source,json]
----
# 쿠키에 DEVICE_CODE 및 REFRESH_TOKEN이 셋팅됨(30 Days 영구쿠키)
{
  "status": "SIGNUP_REQUIRED",
  "preSignupId": 3
}
----


[discrete]
==== 실제 응답

include::{snippets}/auth/oauth2-callback/http-response.adoc[]
include::{snippets}/auth/oauth2-callback/response-fields-data.adoc[]