[[oauth2-api]]
== 🔑 OAuth2 소셜 로그인 API
소셜 로그인(카카오, 구글, 애플)을 지원합니다. +
각 제공자별로 인증 URL이 다릅니다.

=== 로그인/회원가입
이 API 하나에서 기존회원/신규회원 여부를 판별하여 서로 다른 결과를 응답합니다.

[discrete]
[cols="1,9", options="header"]
|====
|provider         |uri
|KAKAO   | https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=${KAKAO_CIENT_ID}&redirect_uri={KAKAO_REDIRECT}
|APPLE   | https://appleid.apple.com/auth/authorize?client_id=${APPLE_CLIENT_ID}&redirect_uri=${APPLE_REDIRECT}&response_type=code id_token&scope=name email&response_mode=form_post
|GOOGLE  | https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id=${GOOGLE_CLIENT_ID}&scope=email&redirect_uri=${GOOGLE_REDIRECT}
|====

[discrete]
==== 환경변수
[cols="1,2,7", options="header"]
|====
| name | value
|${KAKAO_CIENT_ID}     | 797b99b872c1f2e304c816c32c2faa7c
|${KAKAO_REDIRECT}     | ${server}/auth/oauth2/callback/kakao

|${APPLE_CLIENT_ID}     | store.bbaegok.website
|${APPLE_REDIRECT}     | ${server}/auth/oauth2/callback/apple

|${GOOGLE_CLIENT_ID}     | 959213018646-25c9ng0lt07rkpsptr3impq9c37bo8jv.apps.googleusercontent.com
|${GOOGLE_REDIRECT}     | ${server}/auth/oauth2/callback/google

|====


[discrete]

==== 응답 예시

.기존유저 응답(홈화면으로 이동)
[source,json]
----
{
  "status": "EXISTING_USER",
  "accessToken": "..."
}
----

.새로운유저 응답(회원가입으로 이동)
[source,json]
----
# 쿠키에 DEVICE_CODE 및 REFRESH_TOKEN이 셋팅됨(30 Days 영구쿠키)
{
  "status": "SIGNUP_REQUIRED",
  "preSignupId": 3
}
----


[discrete]
==== 실제 응답

include::{snippets}/auth/oauth2-callback/http-response.adoc[]
include::{snippets}/auth/oauth2-callback/response-fields-data.adoc[]